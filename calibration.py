import numpy as np

# M*X = Y*N

M1 = np.array([[-0.18, 0, 0.98, 928.232],
      [0.01, 1, 0, 8.509],
      [-0.98, 0.01, -0.18, 392.979],
      [0, 0, 0, 1]])

M1_inv = np.linalg.inv(M1)

M2 = np.array([[-0.24, -0.18, 0.95, 889.02],
      [0.28, 0.93, 0.25, 226.827],
      [-0.93, 0.33, -0.17, 173.287],
      [0, 0, 0, 1]])

M2_inv = np.linalg.inv(M2)

N1 = np.array([[-0.13, 0.4, -1, -36.3],
      [-0.05, -1, -0.03, -175.7],
      [-1, 0.04, 0.13, -1285.77],
               [0, 0, 0, 1]])

N2 = np.array([[-0.12, -0.23, -0.97, 173.64],
      [-0.32, -0.91, 0.26, 53.77],
      [-0.94, 0.34, 0.03, -1320.49],
               [0, 0, 0, 1]])


a = np.array([[M1_inv[0][0] * N1[0][0], M1_inv[0][1] * N1[0][0], M1_inv[0][2] * N1[0][0], M1_inv[0][0] * N1[1][0], M1_inv[0][1] * N1[1][0], M1_inv[0][2] * N1[1][0], M1_inv[0][0] * N1[2][0], M1_inv[0][1] * N1[2][0], M1_inv[0][2] * N1[2][0], 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [M1_inv[1][0] * N1[0][0], M1_inv[1][1] * N1[0][0], M1_inv[1][2] * N1[0][0], M1_inv[1][0] * N1[1][0], M1_inv[1][1] * N1[1][0], M1_inv[1][2] * N1[1][0], M1_inv[1][0] * N1[2][0], M1_inv[1][1] * N1[2][0], M1_inv[1][2] * N1[2][0], 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [M1_inv[2][0] * N1[0][0], M1_inv[2][1] * N1[0][0], M1_inv[2][2] * N1[0][0], M1_inv[2][0] * N1[1][0], M1_inv[2][1] * N1[1][0], M1_inv[2][2] * N1[1][0], M1_inv[2][0] * N1[2][0], M1_inv[2][1] *N1[2][0], M1_inv[2][2] * N1[2][0], 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],

              [M1_inv[0][0] * N1[0][1], M1_inv[0][1] * N1[0][1], M1_inv[0][2] * N1[0][1], M1_inv[0][0] * N1[1][1], M1_inv[0][1] * N1[1][1], M1_inv[0][2] * N1[1][1], M1_inv[0][0] * N1[2][1], M1_inv[0][1] * N1[2][1], M1_inv[0][2] * N1[2][1], 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
              [M1_inv[1][0] * N1[0][1], M1_inv[1][1] * N1[0][1], M1_inv[1][2] * N1[0][1], M1_inv[1][0] * N1[1][1], M1_inv[1][1] * N1[1][1], M1_inv[1][2] * N1[1][1], M1_inv[1][0] * N1[2][1], M1_inv[1][1] * N1[2][1], M1_inv[1][2] * N1[2][1], 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
              [M1_inv[2][0] * N1[0][1], M1_inv[2][1] * N1[0][1], M1_inv[2][2] * N1[0][1], M1_inv[2][0] * N1[1][1], M1_inv[2][1] * N1[1][1], M1_inv[2][2] * N1[1][1], M1_inv[2][0] * N1[2][1], M1_inv[2][1] * N1[2][1], M1_inv[2][2] * N1[2][1], 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0],

              [M1_inv[0][0] * N1[0][2], M1_inv[0][1] * N1[0][2], M1_inv[0][2] * N1[0][2], M1_inv[0][0] * N1[1][2], M1_inv[0][1] * N1[1][2], M1_inv[0][2] * N1[1][2], M1_inv[0][0] * N1[2][2], M1_inv[0][1] * N1[2][2], M1_inv[0][2] * N1[2][2], 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
              [M1_inv[1][0] * N1[0][2], M1_inv[1][1] * N1[0][2], M1_inv[1][2] * N1[0][2], M1_inv[1][0] * N1[1][2], M1_inv[1][1] * N1[1][2], M1_inv[1][2] * N1[1][2], M1_inv[1][0] * N1[2][2], M1_inv[1][1] * N1[2][2], M1_inv[1][2] * N1[2][2], 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
              [M1_inv[2][0] * N1[0][2], M1_inv[2][1] * N1[0][2], M1_inv[2][2] * N1[0][2], M1_inv[2][0] * N1[1][2], M1_inv[2][1] * N1[1][2], M1_inv[2][2] * N1[1][2], M1_inv[2][0] * N1[2][2], M1_inv[2][1] * N1[2][2], M1_inv[2][2] * N1[2][2], 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],

              [M1_inv[0][0] * N1[0][3], M1_inv[0][1] * N1[0][3], M1_inv[0][2] * N1[0][3], M1_inv[0][0] * N1[1][3], M1_inv[0][1] * N1[1][3], M1_inv[0][2] * N1[1][3], M1_inv[0][0] * N1[2][3], M1_inv[0][1] * N1[2][3], M1_inv[0][2] * N1[2][3], M1_inv[0][0], M1_inv[0][1], M1_inv[0][2], 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
              [M1_inv[1][0] * N1[0][3], M1_inv[1][1] * N1[0][3], M1_inv[1][2] * N1[0][3], M1_inv[1][0] * N1[1][3], M1_inv[1][1] * N1[1][3], M1_inv[1][2] * N1[1][3], M1_inv[1][0] * N1[2][3], M1_inv[1][1] * N1[2][3], M1_inv[1][2] * N1[2][3], M1_inv[1][0], M1_inv[1][1], M1_inv[1][2], 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
              [M1_inv[2][0] * N1[0][3], M1_inv[2][1] * N1[0][3], M1_inv[2][2] * N1[0][3], M1_inv[2][0] * N1[1][3], M1_inv[2][1] * N1[1][3], M1_inv[2][2] * N1[1][3], M1_inv[2][0] * N1[2][3], M1_inv[2][1] * N1[2][3], M1_inv[2][2] * N1[2][3], M1_inv[2][0], M1_inv[2][1], M1_inv[2][2], 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],



              [M2_inv[0][0] * N2[0][0], M2_inv[0][1] * N2[0][0], M2_inv[0][2] * N2[0][0], M2_inv[0][0] * N2[1][0], M2_inv[0][1] * N2[1][0], M2_inv[0][2] * N2[1][0], M2_inv[0][0] * N2[2][0], M2_inv[0][1] * N2[2][0], M2_inv[0][2] * N2[2][0], 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [M2_inv[1][0] * N2[0][0], M2_inv[1][1] * N2[0][0], M2_inv[1][2] * N2[0][0], M2_inv[1][0] * N2[1][0], M2_inv[1][1] * N2[1][0], M2_inv[1][2] * N2[1][0], M2_inv[1][0] * N2[2][0], M2_inv[1][1] * N2[2][0], M2_inv[1][2] * N2[2][0], 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
              [M2_inv[2][0] * N2[0][0], M2_inv[2][1] * N2[0][0], M2_inv[2][2] * N2[0][0], M2_inv[2][0] * N2[1][0], M2_inv[2][1] * N2[1][0], M2_inv[2][2] * N2[1][0], M2_inv[2][0] * N2[2][0], M2_inv[2][1] * N2[2][0], M2_inv[2][2] * N2[2][0], 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],

              [M2_inv[0][0] * N2[0][1], M2_inv[0][1] * N2[0][1], M2_inv[0][2] * N2[0][1], M2_inv[0][0] * N2[1][1], M2_inv[0][1] * N2[1][1], M2_inv[0][2] * N2[1][1], M2_inv[0][0] * N2[2][1], M2_inv[0][1] * N2[2][1], M2_inv[0][2] * N2[2][1], 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
              [M2_inv[1][0] * N2[0][1], M2_inv[1][1] * N2[0][1], M2_inv[1][2] * N2[0][1], M2_inv[1][0] * N2[1][1], M2_inv[1][1] * N2[1][1], M2_inv[1][2] * N2[1][1], M2_inv[1][0] * N2[2][1], M2_inv[1][1] * N2[2][1], M2_inv[1][2] * N2[2][1], 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
              [M2_inv[2][0] * N2[0][1], M2_inv[2][1] * N2[0][1], M2_inv[2][2] * N2[0][1], M2_inv[2][0] * N2[1][1], M2_inv[2][1] * N2[1][1], M2_inv[2][2] * N2[1][1], M2_inv[2][0] * N2[2][1], M2_inv[2][1] * N2[2][1], M2_inv[2][2] * N2[2][1], 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0],

              [M2_inv[0][0] * N2[0][2], M2_inv[0][1] * N2[0][2], M2_inv[0][2] * N2[0][2], M2_inv[0][0] * N2[1][2], M2_inv[0][1] * N2[1][2], M2_inv[0][2] * N2[1][2], M2_inv[0][0] * N2[2][2], M2_inv[0][1] * N2[2][2], M2_inv[0][2] * N2[2][2], 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
              [M2_inv[1][0] * N2[0][2], M2_inv[1][1] * N2[0][2], M2_inv[1][2] * N2[0][2], M2_inv[1][0] * N2[1][2], M2_inv[1][1] * N2[1][2], M2_inv[1][2] * N2[1][2], M2_inv[1][0] * N2[2][2], M2_inv[1][1] * N2[2][2], M2_inv[1][2] * N2[2][2], 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
              [M2_inv[2][0] * N2[0][2], M2_inv[2][1] * N2[0][2], M2_inv[2][2] * N2[0][2], M2_inv[2][0] * N2[1][2], M2_inv[2][1] * N2[1][2], M2_inv[2][2] * N2[1][2], M2_inv[2][0] * N2[2][2], M2_inv[2][1] * N2[2][2], M2_inv[2][2] * N2[2][2], 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0],

              [M2_inv[0][0] * N2[0][3], M2_inv[0][1] * N2[0][3], M2_inv[0][2] * N2[0][3], M2_inv[0][0] * N2[1][3], M2_inv[0][1] * N2[1][3], M2_inv[0][2] * N2[1][3], M2_inv[0][0] * N2[2][3], M2_inv[0][1] * N2[2][3], M2_inv[0][2] * N2[2][3], M2_inv[0][0], M2_inv[0][1], M2_inv[0][2], 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
              [M2_inv[1][0] * N2[0][3], M2_inv[1][1] * N2[0][3], M2_inv[1][2] * N2[0][3], M2_inv[1][0] * N2[1][3], M2_inv[1][1] * N2[1][3], M2_inv[1][2] * N2[1][3], M2_inv[1][0] * N2[2][3], M2_inv[1][1] * N2[2][3], M2_inv[1][2] * N2[2][3], M2_inv[1][0], M2_inv[1][1], M2_inv[1][2], 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
              [M2_inv[2][0] * N2[0][3], M2_inv[2][1] * N2[0][3], M2_inv[2][2] * N2[0][3], M2_inv[2][0] * N2[1][3], M2_inv[2][1] * N2[1][3], M2_inv[2][2] * N2[1][3], M2_inv[2][0] * N2[2][3], M2_inv[2][1] * N2[2][3], M2_inv[2][2] * N2[2][3], M2_inv[2][0], M2_inv[2][1], M2_inv[2][2], 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],

              ])

b = np.array([0, 0, 0, 0, 0, 0, 0, 0, 0, -M1[0][3], -M1[1][3], -M1[2][3], 0, 0, 0, 0, 0, 0, 0, 0, 0, -M2[0][3], -M2[1][3], -M2[2][3]])

ranka = np.linalg.matrix_rank(a)
print("rank a = ", ranka)

w = np.linalg.solve(a, b)
print("w = ", w)

rankw = np.linalg.matrix_rank(w)
print("rank w = ", rankw) #rang von w = 1, darum ist w vektor

X = np.array([[w[0], w[3], w[6], w[9]],
      [w[1], w[4], w[7], w[10]],
      [w[2], w[5], w[8], w[11]],
      [0, 0, 0, 1]])
Y = np.array([[w[12], w[15], w[18], w[21]],
      [w[13], w[16], w[19], w[22]],
      [w[14], w[17], w[20], w[23]],
      [0, 0, 0, 1]])

print("X = ", X)
print("Y = ", Y)


